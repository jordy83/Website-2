<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Leerling Dashboard | Roostertool</title>
    <link rel="stylesheet" href="style.css">
    <script src="menu.js" defer></script>
    <script src="storage.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            showAvailableProjects();
            showMyInschrijvingen();
        });
        function showAvailableProjects() {
            const projects = getProjects();
            const list = document.getElementById("avail-project-list");
            list.innerHTML = "";
            projects.forEach((proj, idx) => {
                list.innerHTML += `<li>
                    <strong>${proj.name}</strong> (Max per leerling: ${proj.maxInsch})<br>
                    <button onclick="inschrijven('${proj.name}')">Inschrijven</button>
                </li>`;
            });
        }
        function showMyInschrijvingen() {
            const username = localStorage.getItem('username');
            const inschrijvingen = getInschrijvingen().filter(i => i.leerling === username);
            const list = document.getElementById("my-inschrijvingen");
            list.innerHTML = "";
            inschrijvingen.forEach(i => {
                list.innerHTML += `<li>${i.project}</li>`;
            });
        }
        function inschrijven(projectName) {
            const username = localStorage.getItem('username');
            addInschrijving(username, projectName);
            showMyInschrijvingen();
            alert(`Je bent ingeschreven voor ${projectName}`);
        }
    </script>
</head>
<body>
    <header>
        <div id="menu"></div>
    </header>
    <main>
        <h2>Leerling Dashboard</h2>
        <section>
            <h3>Beschikbare projecten</h3>
            <ul id="avail-project-list"></ul>
        </section>
        <section>
            <h3>Mijn inschrijvingen</h3>
            <ul id="my-inschrijvingen"></ul>
        </section>
    </main>
</body>
</html>